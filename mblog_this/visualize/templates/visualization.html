{% extends 'FirstHead.html' %}
{% block visual_contents %}
<br />
  <fieldset class="layui-elem-field layui-field-title site-demo-button" style="margin-top: 30px;">
   <!--åˆ†ç»„-->
   <legend>{{title}}</legend>
  </fieldset>
  <div class="layui-row">
    {% if category == 'score_compare' %}
       <div class="layui-col-md10 score_compare">
      {{data|safe}}
      </div>
     {% elif category == 'process_scheduling' %}
       <div class="layui-col-md8 process_scheduling">
           {{data|safe}}
       </div>
    {% elif category == 'lagou_analysis' %}

   <div class="layui-col-md8  lagou_analysis_scale">
     {{scale|safe}}
   </div>

   <hr class="layui-bg-red" />
   <div class="layui-col-md8  lagou_analysis_domain">
     {{domain|safe}}
   </div>

   <hr class="layui-bg-red" />
   <div class="layui-col-md8  lagou_analysis_treatment">
     {{treatment|safe}}
   </div>

   <hr class="layui-bg-red" />
   <div class="layui-col-md8  lagou_analysis_financing">
     {{financing|safe}}
   </div>

   <hr class="layui-bg-red" />
   <div class="layui-col-md8  lagou_analysis_education">
     {{education|safe}}
   </div>


      {% elif category == 'lagou_display' %}
   <!--åˆ©ç”¨script å¯ä»¥ä¸åƒdivç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼ï¼ï¼-->
         <div class="layui-col-md8  lagou_analysis_salary">
    {{salary|safe}}
   </div>
    <hr class="layui-bg-red" />
   <div class="layui-card" style="width:92.3%;" lay-filter="">
    <div class="layui-card-header">
     æœç´¢æ 
    </div>
    <div class="layui-card-body">
     <div class="layui-form">
      <div class="layui-form-item">
          <!-- first_row_start-->
       <div class="layui-row">
        <div class="layui-col-md3" id="city_">
         <label class="layui-form-label">åŸå¸‚ï¼š</label>
         <div class="layui-input-inline">
          <select name="city" id="city" placeholder="è¯·é€‰æ‹©åŸå¸‚" autocomplete="off">
              <option value="">è¯·é€‰æ‹©åŸå¸‚</option>
              <option value="åŒ—äº¬">åŒ—äº¬</option>
              <option value="ä¸Šæµ·">ä¸Šæµ·</option>
              <option value="æ·±åœ³">æ·±åœ³</option>
              <option value="å¹¿å·">å¹¿å·</option>
              <option value="æ­å·">æ­å·</option>
              <option value="æˆéƒ½">æˆéƒ½</option>
              <option value="å—äº¬">å—äº¬</option>
              <option value="æ­¦æ±‰">æ­¦æ±‰</option>
              <option value="è¥¿å®‰">è¥¿å®‰</option>
              <option value="å¦é—¨">å¦é—¨</option>
              <option value="é•¿æ²™">é•¿æ²™</option>
              <option value="è‹å·">è‹å·</option>
              <option value="å¤©æ´¥">å¤©æ´¥</option>
          </select>
         </div>
        </div>
        <div class="layui-col-md3" id="salary_">
         <label class="layui-form-label">æœˆè–ªèŒƒå›´ï¼š</label>
         <div class="layui-input-inline">
          <select name="salary" id="salary" placeholder="è¯·é€‰æ‹©æœˆè–ª" autocomplete="off">
              <option value="">è¯·é€‰æ‹©æœˆè–ªèŒƒå›´</option>
              <option value="2-5">2k-5k</option>
              <option value="5-10">5k-10k</option>
              <option value="10-15">10k-15k</option>
              <option value="15-20">15k-20k</option>
              <option value="20-25">20k-25k</option>
              <option value="25-30">25k-30k</option>
              <option value="30-35">30k-35k</option>
              <option value="35-40">35k-40k</option>
              <option value="40-45">40k-45k</option>
              <option value="45-50">45k-50k</option>
              <option value="50-55">50k-55k</option>
          </select>
         </div>
        </div>
            <div class="layui-col-md3" id="education_">
         <label class="layui-form-label">å­¦å†è¦æ±‚ï¼š</label>
         <div class="layui-input-inline">
          <select name="education" id="education" placeholder="è¯·é€‰æ‹©å­¦å†è¦æ±‚" autocomplete="off">
              <option value="">è¯·é€‰æ‹©å­¦å†è¦æ±‚</option>
              <option value="å¤§ä¸“">å¤§ä¸“</option>
              <option value="æœ¬ç§‘">æœ¬ç§‘</option>
              <option value="ç¡•å£«">ç ”ç©¶ç”Ÿ</option>
              <option value="åšå£«">åšå£«</option>
          </select>
         </div>
        </div>
           <div class="layui-col-md3" id="experience_">
         <label class="layui-form-label">ç»éªŒè¦æ±‚ï¼š</label>
         <div class="layui-input-inline">
          <select name="experience" id="experience" placeholder="è¯·é€‰æ‹©ç»éªŒè¦æ±‚" autocomplete="off">
              <option value="">è¯·é€‰æ‹©ç»éªŒè¦æ±‚</option>
              <option value="0">åº”å±Šæ¯•ä¸šç”Ÿ</option>
              <option value="1-">1å¹´ä»¥ä¸‹</option>
              <option value="1-3">1-3å¹´</option>
              <option value="3-5">3-5å¹´</option>
              <option value="5-10">5-10å¹´</option>
              <option value="10+">10å¹´ä»¥ä¸Š</option>
              <option value="666">ä¸é™</option>
          </select>
         </div>
        </div>
       </div>
          <!-- first_row_over-->
     <!--second_row_start-->
          <div class="layui-row" style="margin-top:15px;">
      <div class="layui-form-item">
       <p class="">å…³é”®è¯ï¼š</p>
       <div class="layui-input-inline"></div>
       <input type="checkbox" value="python" id="python" title="Python" />
       <input type="checkbox" value="java" id="java" title="Java" />
       <input type="checkbox" value="c#" id="c#" title="C#" />
       <input type="checkbox" value="c++" id="c++" title="C++" />
       <input type="checkbox" value="å‰ç«¯" id="web_client" title="webå‰ç«¯" />
       <input type="checkbox" value="åç«¯" id="web_server" title="webåç«¯" />
       <input type="checkbox" value="æœºå™¨å­¦ä¹ " id="machine_learning" title="æœºå™¨å­¦ä¹ " />
       <input type="checkbox" value="äººå·¥æ™ºèƒ½" id="artificial_intelligence" title="äººå·¥æ™ºèƒ½" />
       <input type="checkbox" value="å¤§æ•°æ®" id="big_data" title="å¤§æ•°æ®" />
      </div>
     </div>
           <!--second_row_over-->
          <!--third_row_start-->
          <div class="layui-row" style="margin-top:15px;text-align:center">  <!--è®©æŒ‰é’®å±…ä¸­æˆ–è€…style="display:block;margin:0px auto"-->
                  <button class="layui-btn layui-btn-orange" data-method="search_job" id="search_job_">å­¦ä¹ å§,å°‘å¹´ï¼</button>
          </div>
          <!--third_row_over-->

    </div>
   </div>
        </div>
         </div>
         <!--card over-->
      <!--æ•°æ®è¡¨æ˜¾ç¤º-->
   <table id="lagou_table" lay-filter="lagou_tables"></table>
       {% else %}
         domain
       {% endif %}
</div>  <!--ç»“æŸ-->


<!--å·¥å…·æ¡-->
<!--å¯ä»¥å°†htmlæ”¾å…¥scriptä¸­ï¼Œåªéœ€è¦è®¾ç½®å…¶type-->
<script type="text/html" id="tools">
  <a class="layui-btn layui-btn-xs" lay-event="detail">æŸ¥çœ‹</a>
  <a class="layui-btn layui-btn-xs" lay-event="edit">ç¼–è¾‘</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">åˆ é™¤</a>
</script>

<script>

    layui.use(['table','layer','jquery',],function(){
        var table = layui.table;
        var layer = layui.layer;
        var $ = layui.jquery;

        //å¯è§†åŒ–tips
            $(".lagou_analysis_scale").mouseenter(function(){
           layer.tips('åœ¨2020å¹´ä¸€æœˆä»½çš„30000+æ•°æ®ä¸­ï¼Œå¤§éƒ¨åˆ†ä¼ä¸šäººæ•°éƒ½åœ¨5000-2000+,éƒ½åŒ…å«å¤šä¸ªå²—ä½ã€‚','.lagou_analysis_scale',{tips:[2,'#000000'],time:10000});
          });
            $(".lagou_analysis_domain").mouseenter(function(){
           layer.tips('åœ¨2020å¹´ä¸€æœˆä»½çš„30000+æ•°æ®ä¸­ï¼Œæœ€ç«çš„åº”ç”¨é¢†åŸŸåœ¨ç§»åŠ¨äº’è”ç½‘æœåŠ¡ï¼Œå¯è§äº’è”ç½‘åœ¨21ä¸–çºªå¯¹æ¯ä¸ªä¼ä¸šæ¥è¯´éƒ½æ˜¯ç«äº‰çš„æ ¸å¿ƒï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°å¾ˆå¤šæ–°å‹é¢†åŸŸçš„å‡ºç°ï¼Œä¾‹å¦‚äººå·¥æ™ºèƒ½ï¼ŒAR|AR,æ•°æ®æœåŠ¡ç­‰ï¼Œä¼´éšç€äººå·¥æ™ºèƒ½æ—¶ä»£ï¼Œå¤§æ•°æ®æ—¶ä»£çš„åˆ°æ¥ï¼Œäººå·¥æ™ºèƒ½ä»¥åŠå¤§æ•°æ®å°†ä¼šæˆä¸ºä¼ä¸šç«äº‰çš„åˆä¸€å¤§æ ¸å¿ƒä¼˜åŠ¿ã€‚','.lagou_analysis_domain',{tips:[2,'#000000'],time:10000});
          });
            $(".lagou_analysis_financing").mouseenter(function(){
              layer.tips('åœ¨2020å¹´ä¸€æœˆä»½çš„30000+æ•°æ®ä¸­ï¼Œå¤§å¤šæ•°å·¥èµ„éƒ½æ˜¯ä¸éœ€è¦èèµ„çš„,å› ä¸ºå¯¹èèµ„ä¸å¤ªç†è§£ï¼Œå†æ¬¡ä¹Ÿä¸åšå¤ªå¤šçš„è¯´æ˜','.lagou_analysis_financing',{tips:[2,'#000000'],time:10000});
            });

            $(".lagou_analysis_treatment").mouseenter(function(){
           layer.tips('åœ¨2020å¹´ä¸€æœˆä»½çš„30000+æ•°æ®ä¸­ï¼Œäº”é™©ä¸€é‡‘å‡ ä¹æˆä¸ºå¤§éƒ¨åˆ†ä¼ä¸šçš„æ ‡é…ï¼Œä¸è¿‡æ•´ä½“çš„å¾…é‡è¿˜æ˜¯ä¸é”™çš„å‘¢ã€‚','.lagou_analysis_treatment',{tips:[2,'#000000'],time:10000});
          });
            $(".lagou_analysis_education").mouseenter(function(){
           layer.tips('åœ¨2020å¹´ä¸€æœˆä»½çš„30000+æ•°æ®ä¸­ï¼Œæœ¬ç§‘ç”Ÿ+1-3å¹´å·¥ä½œç»éªŒå¯¹ç»å¤§å¤šæ•°ä¼ä¸šè€Œè¨€æ˜¯ç¡¬æ€§è¦æ±‚ï¼Œå¯ä»¥ä»å›¾ä¸­çœ‹åˆ°ï¼Œç»å¤§å¤šæ•°å…¬å¸å¯¹å·¥ä½œç»éªŒéƒ½æœ‰å¾ˆå¤§çš„è¦æ±‚ï¼Œå› æ­¤å¢åŠ é¡¹ç›®ç»éªŒå’Œå®ä¹ ç»éªŒæ˜¯å¿…é¡»å’Œé‡ä¸­ä¹‹é‡çš„ï¼ï¼ï¼å½“ç„¶å¯¹äºé˜…å†æ›´é«˜ä¸€äº›çš„äººè¿˜æ˜¯æ›´æœ‰ä¼˜åŠ¿çš„ï¼Œæ¯•ç«Ÿé«˜ç´ è´¨äººæ‰æ­£åœ¨æ—¥ç›Šæˆä¸ºä¼ä¸šåŸ¹å…»å’Œå‘å±•çš„å¯¹è±¡ï¼','.lagou_analysis_education',{tips:[2,'#000000'],time:10000});
          });
        $("#city_").mouseenter(function(){
           layer.tips('é€‰å–äº†è®¡ç®—æœºå°±ä¸šè¾ƒå¥½çš„13ä¸ªåœ°æ–¹ğŸ˜','#city_',{tips:[1,'#000000'],time:2000});
           });
        $("#salary_").mouseenter(function(){
           layer.tips('è¿™ä¹Ÿè®¸æ˜¯ä½ ä»¬æ¯”è¾ƒå…³å¿ƒçš„é—®é¢˜äº†~ğŸ¤­','#salary_',{tips:[1,'#000000'],time:2000});
           });
        $("#education_").mouseenter(function(){
           layer.tips('å­¦å†è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼ï¼ï¼ğŸ’ª','#education_',{tips:[1,'#000000'],time:2000});
           });
        $("#experience_").mouseenter(function(){
           layer.tips('å¾ˆå¤šä¼ä¸šéƒ½éœ€è¦æœ‰ç»éªŒçš„è€å¸æœºå‘¢ğŸ™†','#experience_',{tips:[1,'#000000'],time:2000});
           });
        var active ={
           search_job:function(){
              var city = $("#city").val();
              var salary = $("#salary").val();
              var education = $("#education").val();
              var experience = $("#experience").val();
              var keyword = '';
              $.each($("input[type=checkbox]:checked"),function(){   // :å¯ä»¥è¡¨ç¤ºtypeå’Œç±»å‹
                    keyword+=$(this).val()+',';
                 });
             //æ•°æ®é‡è½½
           tableObj.reload({
               url:'/user_api/visualize_lagou_api/',
               //é¢å¤–å‚æ•°
               where:{
                   'city':city,
                   'salary':salary,
                   'education':education,
                   'experience':experience,
                   'keyword':keyword,
                  },
               page:{
                  'curr':1, //pageä»ç¬¬ä¸€é¡µå¼€å§‹
                }
              });
              }
            };

         $("#search_job_").on('click',function(){
            var othis = $(this);    // å¸¦varå’Œä¸å¸¦varçš„åŒºåˆ«:å‰è€…æ˜¯å˜é‡å£°æ˜ï¼Œå¸¦ä¸å¯åˆ é™¤å±æ€§ï¼›åè€…ä¸ºå…¨å±€å˜é‡çš„ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥åˆ é™¤.
            method = othis.data('method'); //methodä¼šåœ¨å…¨å±€windowä¸‹ç”Ÿæˆä¸€ä¸ªå±æ€§
            active[method]? active[method].call(this,othis):'';
            });


        tableObj = table.render({
          elem:'#lagou_table',
          url:'/user_api/visualize_lagou_api/',
          title:'æ‹‰å‹¾ç½‘æ•°æ®å±•ç¤º(ä»…ç”¨äºå­¦ä¹ )',
          height:500,  //é«˜åº¦
          width:'100%',
          toolbar:'<p> æœ¬æ•°æ®ä»…ç”¨äºå­¦ä¹ åˆ†æä½¿ç”¨ï¼Œç‰¹æ­¤å£°æ˜</p>', //å¼€å¯å·¥å…·æ ,é€‚ç”¨äºå·¦ä¾§å›¾æ ‡
          page:true, //åˆ†é¡µ
          cols:[[   //è¡¨å¤´
            {field:'index',title:'ID',fixed:'left',width:'200px'},
            {field:'city',title:'åŸå¸‚',width:'200px'},
            {field:'education',title:'å­¦å†',width:'200px'},
            {field:'industry',title:'ä¼ä¸š',width:'200px'},
            {field:'job_keyword',title:'èŒä½å…³é”®å­—',width:'200px'},
            {field:'publish_time',title:'å‘å¸ƒæ‹›è˜æ—¶é—´',width:'200px'},
            {field:'salary',title:'æœˆè–ª',sort:true,width:'200px'},
            {field:'scale',title:'ä¼ä¸šè§„æ¨¡',width:'200px'},
            {field:'technology_keyword',title:'æŠ€æœ¯å…³é”®è¯',width:'200px'},
            {field:'treatment',title:'å¾…é‡',width:'200px'},
            {fixed:'right',width:180,align:'center',toolbar:'#tools',width:'200px'}  // å·¥å…·æ¡é¢æ¿
            ]],
          text:{
             none:'æŠ±æ­‰ï¼Œäº²ğŸ˜™æš‚æ— ç›¸å…³æ•°æ®' //å½“æ²¡æœ‰æ•°æ®æ—¶æ˜¾ç¤ºæ–‡æœ¬
             },
          defaultToolbar:['filter',{   //é€‚ç”¨äºå³ä¾§å›¾æ ‡
             title:'å¸®åŠ©',
             layEvent:'inform_tips',  //äº‹ä»¶å
             icon:'layui-icon-help',
             }],
          even:'true',  //å¼€å¯éš”è¡ŒèƒŒæ™¯
          });

         //ç›‘å¬å·¥å…·æ¡
         var table_tool = table.on('tool(lagou_tables)',function(obj){   //toolä¸ºåˆ—ä¸­å·¥å…·æ¡äº‹ä»¶åï¼Œé‡Œé¢æ˜¯lay-filterå±æ€§å€¼,objä¸ºtableå¯¹è±¡
            var data = obj.data;
            var layEvent = obj.event;  // è·å–lay-eventå¯¹åº”çš„å€¼
            var tr = obj.tr;   //è·å–å½“å‰è¡Œtrçš„domå¯¹è±¡ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
            if (layEvent === 'detail'){  //3ä¸ªç­‰äºå·å…ˆåˆ¤æ–­ç±»å‹ï¼ˆæ’ç­‰ï¼‰ï¼Œ2ä¸ªç­‰äºå·å…ˆè½¬æ¢ç±»å‹å†åˆ¤æ–­
                layer.msg('ç›®å‰æš‚æ—¶ä¸æä¾›å…·ä½“ä¿¡æ¯');
            }
            else if(layEvent === 'edit'){
                layer.msg('ç¦æ­¢ä¿®æ”¹',{icon:4});
            }
            else if(layEvent === 'del'){
                layer.msg('ç¦æ­¢åˆ é™¤',{icon:0});
            }
            });   //tableçš„renderç»“æŸ

         var tabel_toolbar = table.on('toolbar(lagou_tables)',function(obj){
             var checkStatus = table.checkStatus(obj.config.id);   //è·å–å·²é€‰ä¸­çš„checkboxçš„å¯¹è±¡
             switch(obj.event){
                case 'inform_tips':
                   layer.msg('è¿™äº›çˆ¬å‡ºçš„æ•°æ®ä»…ç”¨äºå­¦ä¹ ï¼Œä¸ç”¨äºå•†ä¸šç”¨é€”ï¼æ¯ä¸ªæœˆä¼šæ›´æ–°ä¸€æ¬¡~');
                }
         });









    });

</script>
{% endblock %}
